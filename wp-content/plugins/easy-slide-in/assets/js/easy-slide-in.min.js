!function(e){function t(){var e=_esi_data.reshow.name,t=window.location.pathname;a.set(e,t)}function s(){var e=_esi_data.reshow.name,t=window.location.pathname,s=!1;return _esi_data.reshow.all?s=a.get(e):(e=a.create_page_key(e,t),s=a.get(e)),s}var a=function(){var e={getItem:function(e){return e&&this.hasItem(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},setItem:function(e,t,s,i,a,n){if(e&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(e)){var d="";if(s)switch(s.constructor){case Number:d=1/0===s?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+s;break;case String:d="; expires="+s;break;case Date:d="; expires="+s.toGMTString()}document.cookie=escape(e)+"="+escape(t)+d+(a?"; domain="+a:"")+(i?"; path="+i:"")+(n?"; secure":"")}},removeItem:function(e,t){e&&this.hasItem(e)&&(document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(t?"; path="+t:""))},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=unescape(e[t]);return e}};return{get:function(t){return e.getItem(t)},set:function(t,s){var i=parseInt(_esi_data.reshow.timeout,10)||0,a=new Date((new Date).getTime()+1e3*i),n=_esi_data.reshow.path,d=this.create_page_key(t,s);return e.setItem(d,s,a,n)},remove:function(t){return e.removeItem(t)},has:function(t){return e.hasItem(t)},keys:function(){return e.keys()},create_page_key:function(e,t){return hide_all=_esi_data.reshow.all,hide_all?e:e+t.replace(/[^-_a-z0-9]/gi,"_")}}}();e(function(){function a(e){var t=document.createElement("div"),s=new RegExp("(khtml|moz|ms|webkit|)"+e,"i");for(var i in t.style)if(i.match(s))return!0;return!1}function n(t){var s=e(t).innerHeight();e(t).hasClass("esi-slide-top")||e(t).hasClass("esi-slide-top_right")||e(t).hasClass("esi-slide-top_left")?e(t).css("top",-1*s).data("slidein-pos",-1*s):(e(t).hasClass("esi-slide-bottom")||e(t).hasClass("esi-slide-bottom_right")||e(t).hasClass("esi-slide-bottom_left"))&&e(t).css("bottom",-1*s).data("slidein-pos",-1*s),(e(t).hasClass("esi-slide-bottom")||e(t).hasClass("esi-slide-top"))&&e(t).css({left:(e(window).width()-e(t).outerWidth())/2+e(window).scrollLeft()+"px"})}function d(t){e(t).css({top:e(window).height()/2+"px",left:(e(window).width()-e(t).outerWidth())/2+e(window).scrollLeft()+"px"})}function o(t){var s=e(t).innerHeight();e(t).css("margin-top",-1*Math.floor(s/2));var i=e(t).innerWidth();e(t).hasClass("esi-slide-right")?e(t).css("right",-1*i).data("slidein-pos",-1*i):e(t).hasClass("esi-slide-left")&&e(t).css("left",-1*i).data("slidein-pos",-1*i)}function l(){if(0!=k.length){var t=e(window).scrollTop(),s=e(document).height()-e(window).height();for(i=0;i<k.length;i++){var a=k[i],n=e(a).data("slidein-start"),d=e(a).data("slidein-end"),o=e(a).data("slidein-for"),l=e(a).data("slidein-after"),r=e(a).data("slidein-timeout"),p=e(a).data("slidein-id");if(n){var m=0,u=s,f=0,g=0;if(n.match(/^\d+%$/)?m=Math.round(parseInt(n.replace(/%$/,""),10)/100*s):e(n).length>0&&(m=e(n).offset().top-e(window).height()),m=0>m?0:m,d?d.match(/^\d+%$/)?u=Math.round(parseInt(d.replace(/%$/,""),10)/100*s):e(d).length>0&&(u=e(d).offset().top+e(d).height()):o&&o.match(/^\d+%$/)&&(u=Math.round(parseInt(o.replace(/%$/,""),10)/100*s+m)),l&&(l.match(/^\d+s$/)?f=Math.round(parseInt(l.replace(/s$/,""),10)):l.match(/^\d+m$/)?f=Math.round(60*parseInt(l.replace(/m$/,""),10)):l.match(/^\d+h$/)&&(f=Math.round(3600*parseInt(l.replace(/h$/,""),10)))),r&&(r.match(/^\d+s$/)?g=Math.round(parseInt(r.replace(/s$/,""),10)):r.match(/^\d+m$/)?g=Math.round(60*parseInt(r.replace(/m$/,""),10)):r.match(/^\d+h$/)&&(g=Math.round(3600*parseInt(r.replace(/h$/,""),10))),g+=f),!(f>0))if(e(a).hasClass("esi-slide-active"))(s>=t&&t>u||t>=0&&m>t)&&h(a);else if(t>=m&&u>=t){if(f>0&&x[p])continue;c(a,f),g>f&&h(a,g)}}}}}function r(){if(0!=k.length){var t=e(window).scrollTop(),s=e(document).height()-e(window).height();for(i=0;i<k.length;i++){var a=k[i],n=e(a).data("slidein-start"),d=e(a).data("slidein-end"),o=e(a).data("slidein-for"),l=e(a).data("slidein-after"),r=e(a).data("slidein-timeout"),p=e(a).data("slidein-id");if(n){var m=0,u=s,f=0,g=0;if(n.match(/^\d+%$/)?m=Math.round(parseInt(n.replace(/%$/,""),10)/100*s):e(n).length>0&&(m=e(n).offset().top-e(window).height()),m=0>m?0:m,d?d.match(/^\d+%$/)?u=Math.round(parseInt(d.replace(/%$/,""),10)/100*s):e(d).length>0&&(u=e(d).offset().top+e(d).height()):o&&o.match(/^\d+%$/)&&(u=Math.round(parseInt(o.replace(/%$/,""),10)/100*s+m)),l&&(l.match(/^\d+s$/)?f=Math.round(parseInt(l.replace(/s$/,""),10)):l.match(/^\d+m$/)?f=Math.round(60*parseInt(l.replace(/m$/,""),10)):l.match(/^\d+h$/)&&(f=Math.round(3600*parseInt(l.replace(/h$/,""),10)))),r&&(r.match(/^\d+s$/)?g=Math.round(parseInt(r.replace(/s$/,""),10)):r.match(/^\d+m$/)?g=Math.round(60*parseInt(r.replace(/m$/,""),10)):r.match(/^\d+h$/)&&(g=Math.round(3600*parseInt(r.replace(/h$/,""),10))),g+=f),0!=f)if(e(a).hasClass("esi-slide-active"))(s>=t&&t>u||t>=0&&m>t)&&h(a);else if(t>=m&&u>=t){if(f>0&&x[p])continue;c(a,f),g>f&&h(a,g)}}}}}function h(t,s,i){var a=e(t);s||(s=0),i&&a.data("slidein-closed","1"),clearTimeout(a.data("slidein-temp-time-hide")),a.data("slidein-temp-time-hide",setTimeout(function(){T&&"2"!=a.data("slidein-running")?(a.data("slidein-running","2"),a.removeClass("esi-slide-active"),a.hasClass("esi-slide-top")||a.hasClass("esi-slide-top_right")||a.hasClass("esi-slide-top_left")?a.stop(!0).animate({top:a.data("slidein-pos")},1e3,p):a.hasClass("esi-slide-left")?a.stop(!0).animate({left:a.data("slidein-pos")},1e3,p):a.hasClass("esi-slide-right")?a.stop(!0).animate({right:a.data("slidein-pos")},1e3,p):(a.hasClass("esi-slide-bottom")||a.hasClass("esi-slide-bottom_right")||a.hasClass("esi-slide-bottom_left"))&&a.stop(!0).animate({bottom:a.data("slidein-pos")},1e3,p)):a.removeClass("esi-slide-active")},1e3*s))}function c(t,s){var i=e(t);"1"!=i.data("slidein-closed")&&(s||(s=0),clearTimeout(e(t).data("slidein-temp-time-show")),i.data("slidein-temp-time-show",setTimeout(function(){T&&"1"!=i.data("slidein-running")?(i.data("slidein-running","1"),i.css("visibility","visible"),i.hasClass("esi-slide-top")||i.hasClass("esi-slide-top_right")||i.hasClass("esi-slide-top_left")?i.stop(!0).animate({top:0},1e3,m):i.hasClass("esi-slide-left")?i.stop(!0).animate({left:0},1e3,m):i.hasClass("esi-slide-right")?i.stop(!0).animate({right:0},1e3,m):i.hasClass("esi-slide-bottom")||i.hasClass("esi-slide-bottom_left")?i.stop(!0).animate({bottom:0},1e3,m):i.hasClass("esi-slide-bottom_right")?i.stop(!0).animate({bottom:0},1e3,m):i.hasClass("esi-slide-center")&&i.fadeIn("slow")):i.addClass("esi-slide-active");var e=i.data("slidein-id"),t=i.data("slidein-after"),s=0;t&&(t.match(/^\d+s$/)?s=Math.round(parseInt(t.replace(/s$/,""),10)):t.match(/^\d+m$/)?s=Math.round(60*parseInt(t.replace(/m$/,""),10)):t.match(/^\d+h$/)&&(s=Math.round(3600*parseInt(t.replace(/h$/,""),10)))),s>0&&(x[e]=e)},1e3*s)))}function p(){e(this).css("visibility","hidden"),e(this).data("slidein-running","0")}function m(){e(this).addClass("esi-slide-active"),e(this).data("slidein-running","0")}function u(t){var s=t.find(".esi-slide-wrap");if(s.length&&s.attr("style")&&s.attr("style").indexOf("width")>=0){var i=parseInt(s.attr("style").replace(/\D/g,""),10),a=e(window).width();i>=a&&s.removeAttr("style"),e(window).resize(function(){e(window).width()<=i?s.removeAttr("style"):s.attr("style")||s.width(i)})}}if(s())return!1;var f=e("#esi-slide_in"),g=(f.find(".esi-slide-content"),f.find(".esi-slide-columns")),w=f.find(".esi-slide-wrap"),v=g.length?g.find(".esi-slide-col"):[];if(g.length&&v.length){var $=v.outerWidth(),_=v.length,I=e(window).width(),C=(_+1.5)*(v.outerWidth()-v.width()),M=$*_+C;if(M>I){var b=Math.ceil((M-I)/$),y=0;_-=b,e(v.get().reverse()).each(function(){return y>=b?!1:(e(this).hide(),void y++)})}else w.width(M)}var k=[],x=[],T=!1;e(window).load(function(){e(".esi-slide").each(function(){var t=e(this);t.css("display",""),t.is(".esi-slide-top, .esi-slide-bottom, .esi-slide-bottom_right, .esi-slide-bottom_left, .esi-slide-top_right, .esi-slide-top_left,  .esi-slide-center")&&n(this),t.is(".esi-slide-right, .esi-slide-left, .esi-slide-center")&&o(this),t.is(".esi-slide-center")&&d(this),t.data("slidein-running","0"),k.push(this),u(t)});var t=!1;a("transition")||(T=!0),t||e(window).scroll(l),l(),r()}),e(".esi-slide").on("click",".esi-slide-close a",function(s){s.preventDefault();var i=e(this).closest(".esi-slide");h(i,0,!0),t()})})}(jQuery);

function slidein_reopen_message(obj, timeout) {
	var $obj = $(obj);
	if ( ! timeout )
		timeout = 0;
	clearTimeout($(obj).data('slidein-temp-time-show'));
	$obj.data('slidein-closed', '');
	$obj.data('slidein-after', '');
	$obj.data('slidein-start', '0%');
	$obj.data( 'slidein-temp-time-show', setTimeout(function(){
		if ( legacy && $obj.data('slidein-running') != '1' ){
			$obj.data('slidein-running', '1');
			$obj.css('visibility', 'visible');
			if ( $obj.hasClass('esi-slide-top') || $obj.hasClass('esi-slide-top_right') || $obj.hasClass('esi-slide-top_left') )
				$obj.stop(true).animate({top: 0}, 1000, legacy_show_after);
			else if ( $obj.hasClass('esi-slide-left'))
				$obj.stop(true).animate({left: 0}, 1000, legacy_show_after);
			else if ( $obj.hasClass('esi-slide-right')   )
				$obj.stop(true).animate({right: 0}, 1000, legacy_show_after);
			else if ( $obj.hasClass('esi-slide-bottom') || $obj.hasClass('esi-slide-bottom_left'))
				$obj.stop(true).animate({bottom: 0}, 1000, legacy_show_after);
			else if ( $obj.hasClass('esi-slide-bottom_right')) {
				$obj.stop(true).animate({bottom: 0}, 1000, legacy_show_after);
			}
			else if ($obj.hasClass('esi-slide-center')) {
				$obj.fadeIn("slow");
			}
			
		}
		else {
			$obj.addClass('esi-slide-active');
		}
		
		var message_id = $obj.data('slidein-id');
		var start_after = $obj.data('slidein-after');
		var start_at = 0;
		if ( start_after ){
			if ( start_after.match(/^\d+s$/) )
				start_at = Math.round( parseInt(start_after.replace(/s$/, ''), 10) );
			else if ( start_after.match(/^\d+m$/) )
				start_at = Math.round( parseInt(start_after.replace(/m$/, ''), 10)*60 );
			else if ( start_after.match(/^\d+h$/) )
				start_at = Math.round( parseInt(start_after.replace(/h$/, ''), 10)*3600 );
		}
		if (start_at > 0) {
			timedSlideIn_obj_shown[message_id] = message_id;
		}

	}, timeout*1000) );		
}